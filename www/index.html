<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ðŸ§  Brainpluck</title>
    <style>
      body {
        font-family: Arial, Helvetica, sans-serif;
      }
      .container {
        display: flex;
        justify-content: center;
      }
      .column {
        padding: 10px;
        margin: 5px;
        background-color: #ffffff;
        text-align: center;
      }
      .smallcolumn {
        width: 80px;
        text-align: center;
        height: 600px;
        position: relative;
      }
      .smallcolumncenter {
        display: block;
        margin: 0;
        padding: 5pt;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
      }
      .rightarrow {
        font-size: 30pt;
      }
      .downarrow {
        font-size: 30pt;
        display: none;
      }
      .between_button_2 {
        margin-top: 10px;
      }
      .status_not_running {
        color: #aaaaaa;
      }
      .status_running {
        color: #11cc11;
      }
      .status_stopped {
        color: #ff0000;
      }
      .status_crashed {
        color: #ff0000;
      }
      .status_finished {
        color: #0088ff;
      }
      .status_awaiting_input {
        color: #0088ff;
      }
      @media only screen and (max-width: 1570px) {
        .container {
          display: block;
        }
        .rightarrow {
          display: none;
        }
        .downarrow {
          display: inline-block;
        }
        .smallcolumn {
          width: 100%;
          height: 40px;
        }
        .between_button {
          display: inline-block;
          position: absolute;
          left: 40px;
          top: 22px;
          height: 80px;
        }
        .between_button_2 {
          left: 112px;
          top: 12px;
        }
      }
    </style>
  </head>
  <body>
    <noscript>This page contains webassembly and javascript content, please enable javascript in your browser.</noscript>
    <h1>Rust Lite to Brainfuck compiler</h1>
    <div class="container">
      <div class="column">
        <p>
          Select example (or write your own):
          <select id="example_select"></select>
        </p>
        <textarea id="hir_code" rows="30" cols="60"></textarea>
      </div>
      <div class="smallcolumn"><div class="smallcolumncenter">
        <div class="rightarrow">â†’</div>
        <div class="downarrow">â†“</div>
        <div class="between_button"><button id="compile_button">Compile!</button></div>
        <div class="between_button between_button_2" style="display: none;"><button id="debug_button">Debug</button></div>
      </div></div>
      <div class="column">
        <p>Compiled "assembly" code:</p>
        <textarea id="compiled_sam" rows="30" cols="30" disabled></textarea>
      </div>
      <div class="smallcolumn"><div class="smallcolumncenter">
        <div class="rightarrow">â†’</div>
        <div class="downarrow">â†“</div>
      </div></div>
      <div class="column">
        <p>Compiled brainfuck code: <button id="bf_copy_button">Copy</button></p>
        <textarea id="compiled_bf" rows="30" cols="52"></textarea>
      </div>
      <div class="smallcolumn"><div class="smallcolumncenter">
        <div class="rightarrow">â†’</div>
        <div class="downarrow">â†“</div>
        <div class="between_button"><button id="jit_run_button">Run!</button></div>
        <div class="between_button between_button_2" style="display: none;"><button id="run_button">Run (slow)</button></div>
        <div class="between_button between_button_2" style="display: none;"><button id="perf_button">Perf</button></div>
      </div></div>
      <div class="column">
        <p>
          Output (status: <span id="bf_status" class="status_not_running">not running</span>):
          <button id="stop_bf_button" disabled>Stop</button>
        </p>
        <textarea id="bf_output" rows="27" cols="52" disabled></textarea>
        <p>Input: <input type="text" id="bf_input" style="width: 290px"></input> <button id="send_input_button">Send</button></p>
      </div>
    </div>
    <script src="./bootstrap.js"></script>
    <h2>What is this?</h2>
    <!--<p>
      It works by compiling the high-level first into a low-level assembly language with a minimal
      instruction set (34 instructions) for a hypothetical machine that has only 5 registers: an
      instruction pointer, a stack pointer, and 3 data registers (one 8-bit and two 32-bit).
      The assembly bytecode is then written onto the Brainfuck tape, and the rest of the
      Brainfuck code then interprets this assembly bytecode.
    </p>
    <p>
      The program can also JIT-compile any Brainfuck code (not only code generated by the
      compiler) into optimized Wasm. It handles I/O asynchronously and runs up to 10x faster
      than any other online Brainfuck interpreter I found.
    </p>
    <p>
      The source code can be found at <a href="https://github.com/Migi/brainpluck">https://github.com/Migi/brainpluck</a>.
    </p>-->
    <p>
      Brainpluck is a compiler that compiles a language that looks like Rust
      (but is really more like C) into Brainfuck.
      It can also JIT-compile any Brainfuck into Wasm.
      More info and source code at <a href="https://github.com/Migi/brainpluck">https://github.com/Migi/brainpluck</a>.
    </p>
  </body>
</html>
